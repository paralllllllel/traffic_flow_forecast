# 交通流量预测 - 默认配置文件

# 数据配置
data:
  data_path: "data/raw/METR-LA.h5"       # 数据文件路径
  adj_path: "data/raw/adj_mx.pkl"        # 邻接矩阵路径
  hist_len: 12                            # 历史时间步 (12 × 5min = 1小时)
  pred_len: 12                            # 预测时间步
  train_ratio: 0.7                        # 训练集比例
  val_ratio: 0.1                          # 验证集比例
  normalize_method: "zscore"              # 标准化方法 (zscore / minmax)
  missing_value_method: "linear"          # 缺失值处理 (linear / mean / forward / zero)

# 模型配置
model:
  num_nodes: 207                          # 节点数量 (METR-LA: 207, PEMS-BAY: 325)
  input_dim: 1                            # 输入特征维度
  d_model: 64                             # 模型隐藏维度
  n_heads: 4                              # 注意力头数
  n_layers: 4                             # Transformer块数量
  ff_dim: 256                             # 前馈网络维度
  dropout: 0.1                            # Dropout比率
  use_time_features: true                 # 是否使用时间特征
  use_graph_conv: false                   # 是否使用图卷积
  causal: false                           # 是否使用因果注意力
  activation: "gelu"                      # 激活函数 (gelu / relu / silu)

# 训练配置
training:
  batch_size: 32                          # 批次大小
  epochs: 100                             # 训练轮数
  learning_rate: 0.001                    # 学习率
  weight_decay: 0.0001                    # 权重衰减
  gradient_clip: 5.0                      # 梯度裁剪
  early_stopping_patience: 15             # 早停耐心值
  scheduler: "cosine"                     # 学习率调度 (cosine / step / plateau)
  warmup_epochs: 5                        # 预热轮数
  num_workers: 4                          # 数据加载线程数

# 损失函数配置
loss:
  type: "mae"                             # 损失类型 (mae / mse / huber)
  huber_delta: 1.0                        # Huber损失的delta参数

# 评估配置
evaluation:
  horizons: [3, 6, 12]                    # 评估的预测时长 (15min, 30min, 60min)
  interval_minutes: 5                     # 时间间隔（分钟）
  metrics: ["MAE", "RMSE", "MAPE"]        # 评估指标

# 拥堵分析配置
congestion:
  thresholds:
    free_flow: [0.0, 0.3]                 # 畅通
    slow: [0.3, 0.5]                      # 缓行
    congested: [0.5, 0.7]                 # 拥堵
    severe: [0.7, 1.0]                    # 严重拥堵

# 保存配置
save:
  checkpoint_dir: "checkpoints"           # 检查点目录
  log_dir: "logs"                         # 日志目录
  save_best_only: true                    # 只保存最佳模型
  save_frequency: 5                       # 保存频率（每N轮）

# 设备配置
device:
  use_cuda: true                          # 是否使用GPU
  gpu_id: 0                               # GPU编号
  seed: 42                                # 随机种子

# 可视化配置
visualization:
  plot_attention: true                    # 是否绘制注意力图
  plot_predictions: true                  # 是否绘制预测结果
  save_figures: true                      # 是否保存图片
  figure_dir: "figures"                   # 图片保存目录
